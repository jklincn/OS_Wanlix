


ARM Macro Assembler    Page 1 


    1 00000000                 IMPORT           guiNextTaskSp
    2 00000000                 IMPORT           gpuiCurTaskSpAddr
    3 00000000         
    4 00000000                 EXPORT           WLX_SwitchToTask
    5 00000000                 EXPORT           WLX_ContextSwitch
    6 00000000         
    7 00000000         
    8 00000000                 PRESERVE8
    9 00000000                 THUMB
   10 00000000         
   11 00000000                 AREA             CODE, CODE, READONLY
   12 00000000         
   13 00000000         WLX_SwitchToTask
   14 00000000         
   15 00000000 4602            MOV              R2,R0       ;ç”±äºR0æ˜¯ä»»åŠ¡ç
                                                            š„å…¥å£å‡½æ•°ï¼Œå›
                                                             æ­¤å…ˆå°†å¯„å­˜å™¨
                                                            ç»„åœ°å€å­˜å…¥R2å¯
                                                            „å­˜å™¨ï¼Œè¿™æ ·R0å
                                                            °±å¯ä»¥è¢«ä¿®æ”¹
   16 00000002 E8B2 1FF1       LDMIA            R2!,{R0,R4-R12} ;æŠŠå‚æ•°ä¸­çš
                                                            „R0ã€R4-R12å¤åˆ¶å
                                                            ˆ°CPUçš„å¯„å­˜å™¨ä¸
                                                            ­
   17 00000006 F8D2 D000       LDMIA            R2,{R13}    ;æŠŠSPå¤åˆ¶åˆ°CPUç
                                                            š„SPå¯„å­˜å™¨ä¸­
   18 0000000A F102 0208       ADD              R2 ,#8      ;R2æŒ‡å‘å¯„å­˜å™¨ç
                                                            »„ä¸­çš„XPSR
   19 0000000E 6811            LDMIA            R2,{R1}     ;æŠŠXPSRçš„å€¼è¯»å
                                                            –åˆ°CPUçš„R1ä¸­
   20 00000010 F381 8803       MSR              XPSR,R1     ;æŠŠR1ä¸­åˆšå­˜å…¥ç
                                                            š„XPSRå€¼å†™å…¥åˆ°X
                                                            PSRå¯„å­˜å™¨
   21 00000014 F1A2 0204       SUB              R2,#4       ;R2æŒ‡å‘å¯„å­˜å™¨ç
                                                            »„ä¸­çš„LR
   22 00000018 F8D2 F000       LDMIA            R2,{PC}     ;è¿è¡Œä»»åŠ¡
   23 0000001C         
   24 0000001C         WLX_ContextSwitch
   25 0000001C         
   26 0000001C         ;ä¿å­˜å½“å‰ä»»åŠ¡çš„æ ˆä¿¡æ¯
   27 0000001C 4603            MOV              R3,R0       ;å°†å¯„å­˜å™¨ç»„åœ°
                                                            å€å­˜å…¥R3å¯„å­˜å™
                                                            ¨
   28 0000001E E8A3 1FF1       STMIA            R3!,{R0,R4-R12} ;ä¿å­˜R0ã€R4~
                                                            R12å¯„å­˜å™¨
   29 00000022 F843 DB04       STMIA            R3!,{R13}   ;ä¿å­˜SPå¯„å­˜å™¨
   30 00000026 F843 EB04       STMIA            R3!,{R14}   ;ä¿å­˜LRå¯„å­˜å™¨
   31 0000002A F3EF 8203       MRS              R2,XPSR     ;è·å–XPSRå¯„å­˜å™
                                                            ¨æ•°å€¼
   32 0000002E 601A            STMIA            R3,{R2}     ;ä¿å­˜åˆ°å¯„å­˜å™¨
                                                            ç»„ä¸­çš„XPSR
   33 00000030         
   34 00000030         ;åŠ è½½å³å°†è¦è¿è¡Œä»»åŠ¡çš„æ ˆä¿¡æ¯
   35 00000030 E8B1 1FF1       LDMIA            R1!,{R0,R4-R12} ;æ¢å¤R0ã€R4~
                                                            R12å¯„å­˜å™¨
   36 00000034 F8D1 D000       LDMIA            R1,{R13}    ;æ¢å¤SPå¯„å­˜å™¨
   37 00000038 F101 0108       ADD              R1,#8       ;R1æŒ‡å‘å¯„å­˜å™¨ç
                                                            »„ä¸­çš„XPSR
   38 0000003C 680A            LDMIA            R1,{R2}     ;è·å–å¯„å­˜å™¨ç»„



ARM Macro Assembler    Page 2 


                                                            ä¸­çš„XPSRæ•°å€¼
   39 0000003E F382 8803       MSR              XPSR,R2     ;æ¢å¤XPSRå¯„å­˜å™
                                                            ¨
   40 00000042 F1A1 0104       SUB              R1,#4       ;R1æŒ‡å‘å¯„å­˜å™¨ç
                                                            »„ä¸­çš„LR
   41 00000046 F8D1 F000       LDMIA            R1,{PC}     ;åˆ‡æ¢ä»»åŠ¡
   42 0000004A         
   43 0000004A         
   44 0000004A         
   45 0000004A         
   46 0000004A         ;Old Version 3.2
   47 0000004A         
   48 0000004A         ;WLX_SwitchToTask
   49 0000004A         
   50 0000004A         ;R0ä¸ºå…¥å£å‚æ•°
   51 0000004A         ;LDMIA R0!,{R4-R12}          ;æŠŠå‚æ•°ä¸­çš„R4-R12å¤åˆ
                       ¶åˆ°CPUçš„å¯„å­˜å™¨ä¸­
   52 0000004A         ;LDMIA R0,{R13}              ;æŠŠSPå¤åˆ¶åˆ°CPUçš„SPå¯„å
                       ­˜å™¨ä¸­
   53 0000004A         ;ADD R0,#8                   ;R0æŒ‡å‘XPSR
   54 0000004A         ;LDMIA R0,{R1}               ;æŠŠXPSRçš„å€¼è¯»å–åˆ°CPUç
                       š„R1ä¸­
   55 0000004A         ;MSR XPSR,R1                 ;æŠŠR1ä¸­åˆšå­˜å…¥çš„XPSRå€
                       ¼å†™å…¥åˆ°XPSRå¯„å­˜å™¨
   56 0000004A         ;SUB R0,#4                   ;R0æŒ‡å‘LR
   57 0000004A         ;LDMIA R0,{PC}               ;è¿è¡Œä»»åŠ¡
   58 0000004A         
   59 0000004A         ;WLX_ContextSwitch
   60 0000004A         
   61 0000004A         ;ä¿å­˜å½“å‰ä»»åŠ¡çš„æ ˆä¿¡æ¯ï¼ŒR0æ˜¯å½“å‰ä»»åŠ¡çš„St
                       ackReg
   62 0000004A         ;STMIA R0!,{R4-R12}          ;æŠŠå½“å‰CPUçš„R4-R12ä¿å­
                       ˜åˆ°å½“å‰ä»»åŠ¡çš„ä»»åŠ¡æ ˆä¸­
   63 0000004A         ;STMIA R0!,{R13}             ;æŠŠå½“å‰CPUçš„SPå¯„å­˜å™¨
                       çš„å€¼ä¿å­˜åˆ°å½“å‰ä»»åŠ¡æ ˆçš„SPä¸­
   64 0000004A         ;STMIA R0!,{R14}             ;æŠŠå½“å‰CPUçš„LRå¯„å­˜å™¨
                       çš„å€¼ä¿å­˜åˆ°å½“å‰ä»»åŠ¡æ ˆçš„LRä¸­ 
   65 0000004A         ;MRS R2,XPSR                 ;æŠŠå½“å‰CPUçš„XPSRå¯„å­˜å
                       ™¨çš„å€¼å…ˆä¿å­˜åˆ°R2ä¸­
   66 0000004A         ;STMIA R0,{R2}               ;æŠŠåˆšä¿å­˜çš„XPSRå€¼å­˜å
                       ˆ°å½“å‰ä»»åŠ¡æ ˆçš„XPSRå¯„å­˜å™¨ä¸­
   67 0000004A         
   68 0000004A         ;LDMIA R1!,{R4-R12}          ;ä»£ç åŠŸèƒ½å¦‚ä¸Šè¿°çš„WL
                       X_SwitchToTaskï¼ŒåŒºåˆ«åœ¨äºå…¥å£å‚æ•°ç”±R0å˜æˆäº†R
                       1
   69 0000004A         ;LDMIA R1,R13
   70 0000004A         ;ADD R1,#8
   71 0000004A         ;LDMIA R1,{R0}
   72 0000004A         ;MSR XPSR,R0
   73 0000004A         ;SUB R1,#4
   74 0000004A         ;LDMIA R1,{PC}
   75 0000004A         
   76 0000004A                 END
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M3 --apcs=interw
ork --depend=.\objects\os_core_s.d -o.\objects\os_core_s.o -IC:\Users\lin\AppDa
ta\Local\Arm\Packs\Keil\STM32F1xx_DFP\2.3.0\Device\Include --predefine="__MICRO
LIB SETA 1" --predefine="__UVISION_VERSION SETA 534" --predefine="STM32F10X_HD 
SETA 1" --list=.\listings\os_core_s.lst ..\User\Wanlix\os_core_s.asm



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

CODE 00000000

Symbol: CODE
   Definitions
      At line 11 in file ..\User\Wanlix\os_core_s.asm
   Uses
      None
Comment: CODE unused
WLX_ContextSwitch 0000001C

Symbol: WLX_ContextSwitch
   Definitions
      At line 24 in file ..\User\Wanlix\os_core_s.asm
   Uses
      At line 5 in file ..\User\Wanlix\os_core_s.asm
Comment: WLX_ContextSwitch used once
WLX_SwitchToTask 00000000

Symbol: WLX_SwitchToTask
   Definitions
      At line 13 in file ..\User\Wanlix\os_core_s.asm
   Uses
      At line 4 in file ..\User\Wanlix\os_core_s.asm
Comment: WLX_SwitchToTask used once
3 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

gpuiCurTaskSpAddr 00000000

Symbol: gpuiCurTaskSpAddr
   Definitions
      At line 2 in file ..\User\Wanlix\os_core_s.asm
   Uses
      None
Comment: gpuiCurTaskSpAddr unused
guiNextTaskSp 00000000

Symbol: guiNextTaskSp
   Definitions
      At line 1 in file ..\User\Wanlix\os_core_s.asm
   Uses
      None
Comment: guiNextTaskSp unused
2 symbols
338 symbols in table
